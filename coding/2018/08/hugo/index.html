<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Hugo 简记 - Alvin&#39;s blog</title>
    <meta property="og:title" content="Hugo 简记 - Alvin&#39;s blog">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Hugo 是用 go 语言实现的一款静态网站生成器，速度比 Hexo 快得多。Hugo 只有一个二进制可执行文件，不用安装 go 就可以运行，与 Hexo 相比省事多了，Hexo 需要安装 nodejs 以及一大堆的 nodejs 包。
[&amp;hellip;] Hugo 的安装很简单，去 github 上下载已经编译好的二进制文件，Linux/Mac 等系统可以放到 /usr/local/bin 下 &amp;hellip;">
      <meta property="og:description" content="Hugo 是用 go 语言实现的一款静态网站生成器，速度比 Hexo 快得多。Hugo 只有一个二进制可执行文件，不用安装 go 就可以运行，与 Hexo 相比省事多了，Hexo 需要安装 nodejs 以及一大堆的 nodejs 包。
[&amp;hellip;] Hugo 的安装很简单，去 github 上下载已经编译好的二进制文件，Linux/Mac 等系统可以放到 /usr/local/bin 下 &amp;hellip;">
      
    

    
    

    
    <meta property="keywords" content ="hugo,mathjax,latex,hexo,gohugo,静态网站生成器,site, generator">
    

    
    <link rel="icon" href="/favicon.ico">
    
<link href='/css/code.css' rel='stylesheet' type='text/css' />


    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />    
    
  </head>

  
  <body class="coding">
    <header class="masthead">
      <h1><a href="/" style="border: none;"><img src="/images/logo.jpg" alt="Alvin Yih"></a></h1>



      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li>
    <a href="/">主页</a>
  </li>
  
  <li>
    <a href="/about/">关于</a>
  </li>
  
  <li class="active">
    <a href="/coding/">编程</a>
  </li>
  
  <li>
    <a href="/essay/">随笔</a>
  </li>
  
  <li>
    <a href="/donate/">捐赠</a>
  </li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      <h1>Hugo 简记</h1>

<h3>Alvin
  /  2018-08-25</h3>
<hr>
      </header>





<h2 id="简介">简介</h2>

<p><a href="https://gohugo.io/">Hugo</a> 是用 go 语言实现的一款静态网站生成器，速度比 <a href="https://hexo.io/">Hexo</a> 快得多。Hugo 只有一个二进制可执行文件，不用安装 go 就可以运行，与 Hexo 相比省事多了，Hexo 需要安装 nodejs 以及一大堆的 nodejs 包。</p>

<h2 id="快速入门">快速入门</h2>

<h3 id="1-安装">1. 安装</h3>

<p>Hugo 的安装很简单，去 <a href="https://github.com/gohugoio/hugo/releases">github</a> 上下载已经编译好的二进制文件，Linux/Mac 等系统可以放到 /usr/local/bin 下面，windows 可能需要修改系统环境变量中的 PATH。总之，能在终端执行 <code>hugo</code> 命令就可以了。</p>

<h3 id="2-生成站点目录">2. 生成站点目录</h3>

<pre><code class="language-sh">hugo new site xx.com
</code></pre>

<p>执行上面的命令后，会生成站点目录 xx.com，目录中包含如下内容：</p>

<pre><code class="language-sh">archetypes/  config.toml  content/  resources/  static/  themes/
</code></pre>

<p>其中 <code>config.toml</code> 是站点配置文件，其余都是目录。</p>

<h3 id="3-添加主题">3. 添加主题</h3>

<p>Hugo 不自带默认主题，可以去<a href="https://themes.gohugo.io/">这里</a>挑选一个主题，官方示例用的 ananke，下载后将 ananke 目录放到 <code>themes</code> 目录下，然后修改 config.toml 设置主题:</p>

<pre><code class="language-sh">theme = &quot;ananke&quot;
</code></pre>

<h3 id="4-新建-markdown-文件">4. 新建 markdown 文件</h3>

<pre><code class="language-sh">cd xx.com &amp;&amp; hugo new notes/hugo.md
</code></pre>

<p>上面的命令会在 content/notes 目录下生成 hugo.md 文件。markdown 文件是根据 <code>archetypes</code> 目录下的模板文件生成的，可以按需要修改这些模板文件。</p>

<p>如果将 config.toml 中的 <code>permalinks</code> 注释掉，Hugo 就会按默认方式，根据文件路径生成 url，如 hugo.md 对应的 url 就是: <code>/notes/hugo/</code>。</p>

<h3 id="5-启动-hugo-自带的-http-server">5. 启动 hugo 自带的 http server</h3>

<pre><code class="language-sh">hugo server -D -p 8888
</code></pre>

<p>默认绑定的 ip 是 127.0.0.1，可以在浏览器中访问 127.0.0.1:8888 看效果。</p>

<h3 id="6-生成静态站点目录">6. 生成静态站点目录</h3>

<pre><code class="language-sh">cd xx.com &amp;&amp; hugo
</code></pre>

<p>上面的命令会在 xx.com 目录下生成一个 public 目录，它包含了站点的全部静态内容，可以直接挂在 nginx 下面运行。</p>

<h2 id="用-mathjax-支持-latex-数学公式">用 Mathjax 支持 LaTeX 数学公式</h2>

<p>LaTeX 数学公式可以用 <a href="//docs.mathjax.org/en/latest/configuration.html">Mathjax</a> 渲染，只需要在网页中引入 Mathjax.js 就行了。但 markdown 与 LaTeX 有一个冲突：<code>_</code> 在 markdown 中表示强调，在 LaTeX 中表示下标，markdown 转换成 html 时，<code>_</code> 已经被替换掉了，所以等到 Mathjax 渲染数学公式时可能会出错。Hugo 官方及网上给出了一些解决方案，或多或少有些问题，此处修正了其中的一些缺陷，总结如下：</p>

<h3 id="1-新建-mathjax-html-模板">1. 新建 mathjax html 模板</h3>

<p>在主题的 layouts/partials 目录下新建一个模板文件 mathjax.html，内容如下:</p>

<pre><code class="language-js">&lt;script type=&quot;text/javascript&quot; async
        src=&quot;//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;
    MathJax.Hub.Config({
        //CommonHTML: { linebreaks: { automatic: true } },
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            displayMath: [['$$','$$']],
            processEscapes: true,
            processEnvironments: false,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i = 0; i &lt; all.length; i += 1) {
            var x = all[i].SourceElement().parentNode.className;
            if (x == '') {
                all[i].SourceElement().parentNode.className += 'has-jax';
            } else if (x.indexOf('has-jax') == -1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        }
    });
&lt;/script&gt;
</code></pre>

<p>上述代码，在 html 中引入 Mathjax.js。<code>Config</code> 函数对 Mathjax 进行配置，而 <code>Queue</code> 函数给含有数学公式的 html 元素加上 <code>class=&quot;has-jax&quot;</code>，Mathjax 发现 <code>has-jax</code> 时就会渲染其中的数学公式。网上的代码有一个问题，会对一个 html 标签加多次 has-jax，此处修复了这个问题。</p>

<h3 id="2-在-footer-中加入-mathjax">2. 在 footer 中加入 mathjax</h3>

<p>修改主题 layouts/partials 目录下的 footer.html 文件，在适当的位置加入下面的一行：</p>

<pre><code class="language-sh">{{ if .Params.mathjax }} {{ partial &quot;mathjax.html&quot; . }} {{ end }}
</code></pre>

<p>加上 <code>if .Params.mathjax</code> 判断条件，需要在 markdown 文件的 front-matter 区域加上 mathjax: true 启用 Mathjax。默认是不启用的，以免影响网页的加载速度，毕竟不是所有页面都含有数学公式。</p>

<h3 id="3-修改-css-样式文件">3. 修改 css 样式文件</h3>

<p>修改主题 static/css 目录下的 style.css 样式文件，加入下面的代码：</p>

<pre><code class="language-css">code.has-jax {
  font: inherit;
  font-size: 100%;
  background: inherit;
  border: inherit;
  color: #333;
}
</code></pre>

<p>上述代码是为了修复行内公式的样式，注意 color 一般设置成 html 默认的文本颜色。</p>

<h3 id="4-输入-latex-数学公式">4. 输入 LaTeX 数学公式</h3>

<pre><code class="language-sh"># 行内公式的输入
$ y = x^2 $                    # 无冲突正常输入
`$ x_1, x_2, \cdots, x_n $`    # 有冲突两边加上`

# 非行内公式，无冲突正常输入
$$ a^{p-1} \equiv 1 \pmod{p} $$  # 

# 非行内公式，有冲突时放到 &lt;div&gt; 中
&lt;div&gt;
$$
s_1 \equiv s_0 \cdot a \pmod{m} \\\\ 
s_2 \equiv s_1 \cdot a \pmod{m} \\\\ 
\vdots \\\\ 
s_{m-1} \equiv s_{m-2} \cdot a \pmod{m}
$$
&lt;/div&gt;
</code></pre>


  <footer>
  



<nav class="post-nav">
  <ul>
     
    <li>
      <span class="date">&rtrif; 2018/08/26&emsp;</span>
      <a href="/coding/2018/08/from-c-to-cpp/">从 C 到 C&#43;&#43;</a>
    </li>
    
    <li class="active">
      <span class="date">&rtrif; 2018/08/25&emsp;</span>
      <a href="/coding/2018/08/hugo/">Hugo 简记</a>     
    </li>
    
    <li>
      <span class="date">&rtrif; 2018/08/22&emsp;</span>
      <a href="/coding/2018/08/autohotkey/">用 Autohotkey 保持窗口在最前</a>
    </li>
    
  </ul>
</nav>

<link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.6.2/gitalk.min.css">
<script src="//cdn.bootcss.com/gitalk/1.6.2/gitalk.min.js"></script>
<div id="gitalk-container"></div>     
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '78371628e00f43aff18e',
    clientSecret: '6905d0b807b7008ea04b420bb9fd9a7f390ec400',
    repo: 'gitalk',
    owner: 'idealvin',
    admin: ['idealvin'],
    id: location.pathname,
    language: 'zh-CN',
    distractionFreeMode: false
  })
  
  gitalk.render('gitalk-container');
</script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/cpp.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/bash.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy;2018-2020 <a href="/">Alvin Yih</a> | <a href="https://github.com/idealvin">Github</a></div>
  
  </footer>
  </article>
  
  
  </body>
</html>

