<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Hugo 简记 - Alvin&#39;s Blog</title>
    <meta property="og:title" content="Hugo 简记 - Alvin&#39;s Blog">
    

    
    <meta property="keywords" content ="hugo,mathjax,latex,hexo,gohugo,静态网站生成器,site, generator">
    

    <meta name="twitter:card" content="summary">
    
      
    

    
      
      <meta property="og:description" content="Hugo 是用 go 语言实现的一款静态网站生成器，速度比 Hexo 快得多。Hugo 只有一个二进制可执行文件，不用安装 go 就可以运行，与 Hexo 相比省事多了，Hexo 需要安装 nodejs 以及一大堆的 nodejs 包。
[&amp;hellip;] Hugo 的安装很简单，去 github 上下载已经编译好的二进制文件，Linux/Mac 等系统可以放到 /usr/local/bin 下 &amp;hellip;">
      
    

    
    

    
    <link rel="icon" href="/favicon.ico">
    
<link href='/css/code.css' rel='stylesheet' type='text/css' />


    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />    
    
  </head>

  
  <body class="coding">
    <header class="masthead">
      <h1><a href="/" style="border: none;"><img src="/images/logo.jpg" alt="Alvin Yih"></a></h1>



      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">主页</a></li>
  
  <li><a href="/about/">关于</a></li>
  
  <li><a href="/coding/">编程</a></li>
  
  <li><a href="/essay/">随笔</a></li>
  
  <li><a href="/donate/">捐赠</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      <h1>Hugo 简记</h1>

<h3>Alvin
  /  2018-08-25</h3>
<hr>
      </header>




<h2 id="简介">简介</h2>
<p><a href="https://gohugo.io/">Hugo</a> 是用 go 语言实现的一款静态网站生成器，速度比 <a href="https://hexo.io/">Hexo</a> 快得多。Hugo 只有一个二进制可执行文件，不用安装 go 就可以运行，与 Hexo 相比省事多了，Hexo 需要安装 nodejs 以及一大堆的 nodejs 包。</p>
<h2 id="快速入门">快速入门</h2>
<h3 id="1-安装">1. 安装</h3>
<p>Hugo 的安装很简单，去 <a href="https://github.com/gohugoio/hugo/releases">github</a> 上下载已经编译好的二进制文件，Linux/Mac 等系统可以放到 /usr/local/bin 下面，windows 可能需要修改系统环境变量中的 PATH。总之，能在终端执行 <code>hugo</code> 命令就可以了。</p>
<h3 id="2-生成站点目录">2. 生成站点目录</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">hugo new site xx.com
</code></pre></div><p>执行上面的命令后，会生成站点目录 xx.com，目录中包含如下内容：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">archetypes/  config.toml  content/  resources/  static/  themes/
</code></pre></div><p>其中 <code>config.toml</code> 是站点配置文件，其余都是目录。</p>
<h3 id="3-添加主题">3. 添加主题</h3>
<p>Hugo 不自带默认主题，可以去<a href="https://themes.gohugo.io/">这里</a>挑选一个主题，官方示例用的 ananke，下载后将 ananke 目录放到 <code>themes</code> 目录下，然后修改 config.toml 设置主题:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">theme <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ananke&#34;</span>
</code></pre></div><h3 id="4-新建-markdown-文件">4. 新建 markdown 文件</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">cd xx.com <span style="color:#f92672">&amp;&amp;</span> hugo new notes/hugo.md
</code></pre></div><p>上面的命令会在 content/notes 目录下生成 hugo.md 文件。markdown 文件是根据 <code>archetypes</code> 目录下的模板文件生成的，可以按需要修改这些模板文件。</p>
<p>如果将 config.toml 中的 <code>permalinks</code> 注释掉，Hugo 就会按默认方式，根据文件路径生成 url，如 hugo.md 对应的 url 就是: <code>/notes/hugo/</code>。</p>
<h3 id="5-启动-hugo-自带的-http-server">5. 启动 hugo 自带的 http server</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">hugo server -D -p <span style="color:#ae81ff">8888</span>
</code></pre></div><p>默认绑定的 ip 是 127.0.0.1，可以在浏览器中访问 127.0.0.1:8888 看效果。</p>
<h3 id="6-生成静态站点目录">6. 生成静态站点目录</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">cd xx.com <span style="color:#f92672">&amp;&amp;</span> hugo
</code></pre></div><p>上面的命令会在 xx.com 目录下生成一个 public 目录，它包含了站点的全部静态内容，可以直接挂在 nginx 下面运行。</p>
<h2 id="用-mathjax-支持-latex-数学公式">用 Mathjax 支持 LaTeX 数学公式</h2>
<p>LaTeX 数学公式可以用 <a href="//docs.mathjax.org/en/latest/configuration.html">Mathjax</a> 渲染，只需要在网页中引入 Mathjax.js 就行了。但 markdown 与 LaTeX 有一个冲突：<code>_</code> 在 markdown 中表示强调，在 LaTeX 中表示下标，markdown 转换成 html 时，<code>_</code> 已经被替换掉了，所以等到 Mathjax 渲染数学公式时可能会出错。Hugo 官方及网上给出了一些解决方案，或多或少有些问题，此处修正了其中的一些缺陷，总结如下：</p>
<h3 id="1-新建-mathjax-html-模板">1. 新建 mathjax html 模板</h3>
<p>在主题的 layouts/partials 目录下新建一个模板文件 mathjax.html，内容如下:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span> <span style="color:#a6e22e">async</span>
        <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#a6e22e">MathJax</span>.<span style="color:#a6e22e">Hub</span>.<span style="color:#a6e22e">Config</span>({
        <span style="color:#75715e">//CommonHTML: { linebreaks: { automatic: true } },
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">tex2jax</span><span style="color:#f92672">:</span> {
            <span style="color:#a6e22e">inlineMath</span><span style="color:#f92672">:</span> [[<span style="color:#e6db74">&#39;$&#39;</span>,<span style="color:#e6db74">&#39;$&#39;</span>], [<span style="color:#e6db74">&#39;\\(&#39;</span>,<span style="color:#e6db74">&#39;\\)&#39;</span>]],
            <span style="color:#a6e22e">displayMath</span><span style="color:#f92672">:</span> [[<span style="color:#e6db74">&#39;$$&#39;</span>,<span style="color:#e6db74">&#39;$$&#39;</span>]],
            <span style="color:#a6e22e">processEscapes</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
            <span style="color:#a6e22e">processEnvironments</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
            <span style="color:#a6e22e">skipTags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;script&#39;</span>, <span style="color:#e6db74">&#39;noscript&#39;</span>, <span style="color:#e6db74">&#39;style&#39;</span>, <span style="color:#e6db74">&#39;textarea&#39;</span>, <span style="color:#e6db74">&#39;pre&#39;</span>],
        }
    });
    <span style="color:#a6e22e">MathJax</span>.<span style="color:#a6e22e">Hub</span>.<span style="color:#a6e22e">Queue</span>(<span style="color:#66d9ef">function</span>() {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">all</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">MathJax</span>.<span style="color:#a6e22e">Hub</span>.<span style="color:#a6e22e">getAllJax</span>(), <span style="color:#a6e22e">i</span>;
        <span style="color:#66d9ef">for</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">all</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>) {
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">all</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">SourceElement</span>().<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">className</span>;
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">x</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;&#39;</span>) {
                <span style="color:#a6e22e">all</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">SourceElement</span>().<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">className</span> <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39;has-jax&#39;</span>;
            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;has-jax&#39;</span>) <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
                <span style="color:#a6e22e">all</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">SourceElement</span>().<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">className</span> <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#39; has-jax&#39;</span>;
            }
        }
    });
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</code></pre></div><p>上述代码，在 html 中引入 Mathjax.js。<code>Config</code> 函数对 Mathjax 进行配置，而 <code>Queue</code> 函数给含有数学公式的 html 元素加上 <code>class=&quot;has-jax&quot;</code>，Mathjax 发现 <code>has-jax</code> 时就会渲染其中的数学公式。网上的代码有一个问题，会对一个 html 标签加多次 has-jax，此处修复了这个问题。</p>
<h3 id="2-在-footer-中加入-mathjax">2. 在 footer 中加入 mathjax</h3>
<p>修改主题 layouts/partials 目录下的 footer.html 文件，在适当的位置加入下面的一行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#f92672">{{</span> <span style="color:#66d9ef">if</span> .Params.mathjax <span style="color:#f92672">}}</span> <span style="color:#f92672">{{</span> partial <span style="color:#e6db74">&#34;mathjax.html&#34;</span> . <span style="color:#f92672">}}</span> <span style="color:#f92672">{{</span> end <span style="color:#f92672">}}</span>
</code></pre></div><p>加上 <code>if .Params.mathjax</code> 判断条件，需要在 markdown 文件的 front-matter 区域加上 mathjax: true 启用 Mathjax。默认是不启用的，以免影响网页的加载速度，毕竟不是所有页面都含有数学公式。</p>
<h3 id="3-修改-css-样式文件">3. 修改 css 样式文件</h3>
<p>修改主题 static/css 目录下的 style.css 样式文件，加入下面的代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">code</span>.<span style="color:#a6e22e">has-jax</span> {
  <span style="color:#66d9ef">font</span>: <span style="color:#66d9ef">inherit</span>;
  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
  <span style="color:#66d9ef">background</span>: <span style="color:#66d9ef">inherit</span>;
  <span style="color:#66d9ef">border</span>: <span style="color:#66d9ef">inherit</span>;
  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#333</span>;
}
</code></pre></div><p>上述代码是为了修复行内公式的样式，注意 color 一般设置成 html 默认的文本颜色。</p>
<h3 id="4-输入-latex-数学公式">4. 输入 LaTeX 数学公式</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e"># 行内公式的输入</span>
$ y <span style="color:#f92672">=</span> x^2 $                    <span style="color:#75715e"># 无冲突正常输入</span>
<span style="color:#e6db74">`</span>$ x_1, x_2, <span style="color:#ae81ff">\c</span>dots, x_n $<span style="color:#e6db74">`</span>    <span style="color:#75715e"># 有冲突两边加上`</span>

<span style="color:#75715e"># 非行内公式，无冲突正常输入</span>
$$ a^<span style="color:#f92672">{</span>p-1<span style="color:#f92672">}</span> <span style="color:#ae81ff">\e</span>quiv <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">\p</span>mod<span style="color:#f92672">{</span>p<span style="color:#f92672">}</span> $$  # 

<span style="color:#75715e"># 非行内公式，有冲突时放到 &lt;div&gt; 中</span>
&lt;div&gt;
$$
s_1 <span style="color:#ae81ff">\e</span>quiv s_0 <span style="color:#ae81ff">\c</span>dot a <span style="color:#ae81ff">\p</span>mod<span style="color:#f92672">{</span>m<span style="color:#f92672">}</span> <span style="color:#ae81ff">\\\\</span> 
s_2 <span style="color:#ae81ff">\e</span>quiv s_1 <span style="color:#ae81ff">\c</span>dot a <span style="color:#ae81ff">\p</span>mod<span style="color:#f92672">{</span>m<span style="color:#f92672">}</span> <span style="color:#ae81ff">\\\\</span> 
<span style="color:#ae81ff">\v</span>dots <span style="color:#ae81ff">\\\\</span> 
s_<span style="color:#f92672">{</span>m-1<span style="color:#f92672">}</span> <span style="color:#ae81ff">\e</span>quiv s_<span style="color:#f92672">{</span>m-2<span style="color:#f92672">}</span> <span style="color:#ae81ff">\c</span>dot a <span style="color:#ae81ff">\p</span>mod<span style="color:#f92672">{</span>m<span style="color:#f92672">}</span>
$$
&lt;/div&gt;
</code></pre></div>

  <footer>
  



<nav class="post-nav">
  <ul>
     
    <li>
      <span class="post-nav-prev">&rtrif; 上一篇 &emsp;</span>
      <a href="/coding/2018/08/from-c-to-cpp/">从 C 到 C&#43;&#43;</a>
    </li>
    
    
    <li>
      <span class="post-nav-next">&rtrif; 下一篇 &emsp;</span>
      <a href="/coding/2018/08/autohotkey/">用 Autohotkey 保持窗口在最前</a>
    </li>
    
  </ul>
</nav>



<link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.6.2/gitalk.min.css">
<script src="//cdn.bootcss.com/gitalk/1.6.2/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '78371628e00f43aff18e',
    clientSecret: '6905d0b807b7008ea04b420bb9fd9a7f390ec400',
    repo: 'gitalk',
    owner: 'idealvin',
    admin: ['idealvin'],
    id: location.pathname,
    language: 'zh-CN',
    distractionFreeMode: false
  })
  
  gitalk.render('gitalk-container');
</script>



  



<script src="//cdn.bootcss.com/highlight.js/10.1.2/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/10.1.2/languages/cpp.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/10.1.2/languages/bash.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">©2018-2020 <a href="/">Alvin Yih</a> | <a href="https://github.com/idealvin">Github</a></div>
  
  </footer>
  
   <div class="cnzz">
<script type="text/javascript">
  document.write(unescape("%3Cspan id='cnzz_stat_icon_1279117347'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1279117347%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));
</script>
</div> 
  </article>
  
  </body>
</html>

